<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:cxf="http://camel.apache.org/schema/cxf"
    xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="          http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans.xsd     http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd       http://camel.apache.org/schema/cxf           http://camel.apache.org/schema/cxf/camel-cxf.xsd                http://camel.apache.org/schema/spring                 http://camel.apache.org/schema/spring/camel-spring.xsd    http://cxf.apache.org/transports/http/configuration     http://cxf.apache.org/schemas/configuration/http-conf.xsd">
    <bean class="com.tml.IRN.LogAggregator" id="logger"/>
    <cxf:cxfEndpoint address="http://0.0.0.0:8091/GenIRN" id="GenIRN" serviceClass="com.tml.IRN.IRNService">
        <cxf:properties>
            <entry key="dataFormat" value="MESSAGE"/>
        </cxf:properties>
    </cxf:cxfEndpoint>
    <cxf:rsClient
        address="http://dev-irn-api-1287737966.ap-south-1.elb.amazonaws.com/v1/en/push"
        id="rsGenIRN" loggingFeatureEnabled="true"/>
    <!-- Define a traditional camel context here -->
    <camelContext id="camel"
        xmlns="http://camel.apache.org/schema/spring" xmlns:com="http://com.tml.IRN">
        <dataFormats>
            <jaxb contextPath="com.tml.IRN" id="xml"
                objectFactory="true" prettyPrint="true"/>
            <!--<json id="json" library="Jackson" unmarshalTypeName="com.tml.crm.KYCInputResponse"/>
            <json id="gson" library="Gson"/>
            <soapjaxb contextPath="com.tml.crm" id="soapxml" namespacePrefixRef="myMap"/>-->
        </dataFormats>
        <route id="simple-route">
            <!--  <from id="route-timer" uri="timer:foo?period=200"/> -->
            <from id="_from1" uri="cxf:bean:GenIRN"/>
            <!-- <doTry id="_doTry15"> -->
            <bean id="_bean65"
                method="sourceIp(REQUEST FROM Source:: **********)" ref="logger"/>
            <bean id="_bean66"
                method="request(******* Request Received from User *********)" ref="logger"/>
            <log id="_log1" message="after setting User_GSTIN"/>
            <log id="_log1" message="Request Received from CRM____${body}"/>
            <setHeader headerName="User_GSTIN" id="_setHeader1">
                <xpath resultType="java.lang.String">/User_GSTIN/text()</xpath>
            </setHeader>
            <log id="_log1" message="after setting User_GSTIN____${header.User_GSTIN}"/>
            <setBody id="_setBody2">
                <simple>
                        &lt;ns2:IRPResponse xmlns:ns2="http://schemas.xmlsoap.org/soap/envelope/"&gt;
   &lt;request_id&gt;&lt;/request_id&gt;
   &lt;result&gt;Please Check Document Type gold&lt;/result&gt;
   &lt;statusCode&gt;&lt;/statusCode&gt;
&lt;/ns2:IRPResponse&gt;
</simple>
            </setBody>
            <!-- <log id="route-log" message=">>> ${body}"/> -->
        </route>
    </camelContext>
</beans>
